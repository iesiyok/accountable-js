{"version":3,"sources":["sources://./src/views/ChooseAddress.vue","webpack-generated:///./src/views/ChooseAddress.vue?ae14","webpack-generated:///./src/views/ChooseAddress.vue?8b1a","webpack-generated:///./src/views/ChooseAddress.vue?aa07","webpack-generated:///./src/views/ChooseAddress.vue?82f5","webpack:///./src/views/ChooseAddress.vue?63c3","webpack-generated:///./src/views/ChooseAddress.vue?3af2","webpack-generated:///./src/views/ChooseAddress.vue?97c5"],"names":[],"mappings":"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","file":"js/choose-address.js","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component } from 'vue-property-decorator';\nimport { Getter, Mutation } from 'vuex-class';\nimport { SmallPage, AccountSelector } from '@nimiq/vue-components';\nimport BitcoinSyncBaseView from './BitcoinSyncBaseView.vue';\nimport StatusScreen from '../components/StatusScreen.vue';\nimport GlobalClose from '../components/GlobalClose.vue';\nimport { ChooseAddressResult, RequestType } from '../lib/PublicRequestTypes';\nimport { ParsedChooseAddressRequest } from '../lib/RequestTypes';\nimport staticStore, { Static } from '../lib/StaticStore';\nimport { WalletInfo } from '../lib/WalletInfo';\nimport { AccountInfo } from '../lib/AccountInfo';\nimport { ContractInfo } from '../lib/ContractInfo';\nimport WalletInfoCollector from '../lib/WalletInfoCollector';\nimport { WalletStore } from '../lib/WalletStore';\nimport { BtcAddressInfo } from '../lib/bitcoin/BtcAddressInfo';\n\n@Component({components: { AccountSelector, SmallPage, StatusScreen, GlobalClose }})\nexport default class ChooseAddress extends BitcoinSyncBaseView {\n    @Static private request!: ParsedChooseAddressRequest;\n\n    @Getter private findWallet!: (id: string) => WalletInfo | undefined;\n    @Getter private processedWallets!: WalletInfo[];\n\n    @Mutation('setActiveAccount') private $setActiveAccount!: (payload: {\n        walletId: string,\n        userFriendlyAddress: string,\n    }) => any;\n\n    public async created() {\n        if (this.processedWallets.length === 0) {\n            this.goToOnboarding(true);\n        }\n    }\n\n    private async accountSelected(walletId: string, address: string) {\n        const walletInfo = this.findWallet(walletId);\n        if (!walletInfo) {\n            console.error('UNEXPECTED: Selected walletId not found:', walletId);\n            return;\n        }\n\n        const accountOrContractInfo: AccountInfo | ContractInfo = walletInfo.accounts.get(address) ||\n            walletInfo.findContractByAddress(Nimiq.Address.fromString(address))!;\n\n        this.$setActiveAccount({\n            walletId: walletInfo.id,\n            userFriendlyAddress: accountOrContractInfo.userFriendlyAddress,\n        });\n\n        let btcAddress: string | undefined;\n\n        if (this.request.returnBtcAddress && walletInfo.btcXPub) {\n            this.state = this.State.SYNCING;\n            // const startIndex = Math.max(Math.min(\n            //     walletInfo.btcAddresses.external.findIndex((addressInfo) => !addressInfo.used),\n            //     walletInfo.btcAddresses.internal.findIndex((addressInfo) => !addressInfo.used),\n            // ), 0);\n            let btcAddresses: {\n                internal: BtcAddressInfo[];\n                external: BtcAddressInfo[];\n            };\n            try {\n                btcAddresses = await WalletInfoCollector.detectBitcoinAddresses(walletInfo.btcXPub, /* startIndex */ 0);\n            } catch (error) {\n                this.state = this.State.SYNCING_FAILED;\n                this.error = error.message;\n                return;\n            }\n            walletInfo.btcAddresses = btcAddresses;\n            await WalletStore.Instance.put(walletInfo);\n            const unusedExternalAddresses = btcAddresses.external.filter((addressInfo) => !addressInfo.used);\n            if (unusedExternalAddresses.length > 0) {\n                // We try to use the 2nd unused address, because the first is reserved for swaps and not displayed\n                // in the wallet (cannot be validated by the user).\n                btcAddress = unusedExternalAddresses[Math.min(unusedExternalAddresses.length - 1, 1)].address;\n            }\n        }\n\n        const result: ChooseAddressResult = {\n            address: accountOrContractInfo.userFriendlyAddress,\n            label: accountOrContractInfo.label,\n            btcAddress,\n        };\n\n        this.$rpc.resolve(result);\n    }\n\n    private goToOnboarding(useReplace?: boolean) {\n        // Redirect to onboarding\n        staticStore.originalRouteName = RequestType.CHOOSE_ADDRESS;\n        if (useReplace) {\n            this.$router.replace({name: RequestType.ONBOARD});\n        }\n        this.$router.push({name: RequestType.ONBOARD});\n    }\n}\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"container\" },\n    [\n      _c(\n        \"SmallPage\",\n        [\n          _c(\"h1\", { staticClass: \"nq-h1\" }, [\n            _vm._v(_vm._s(_vm.$t(\"Choose an Address\")))\n          ]),\n          _c(\"div\", { staticClass: \"request-info nq-text\" }, [\n            _vm._v(\n              \" \" +\n                _vm._s(\n                  _vm.$t(\"{appName} is asking for an address to use.\", {\n                    appName: _vm.request.appName\n                  })\n                ) +\n                \" \"\n            )\n          ]),\n          _c(\"AccountSelector\", {\n            attrs: {\n              wallets: _vm.processedWallets,\n              minBalance: _vm.request.minBalance,\n              disableContracts: _vm.request.disableContracts,\n              disableLegacyAccounts: _vm.request.disableLegacyAccounts,\n              disableBip39Accounts: _vm.request.disableBip39Accounts,\n              disableLedgerAccounts: _vm.request.disableLedgerAccounts,\n              highlightBitcoinAccounts: _vm.request.returnBtcAddress\n            },\n            on: {\n              \"account-selected\": _vm.accountSelected,\n              login: function() {\n                return _vm.goToOnboarding(false)\n              }\n            }\n          }),\n          _vm.state !== _vm.State.NONE\n            ? _c(\"StatusScreen\", {\n                attrs: {\n                  state: _vm.statusScreenState,\n                  title: _vm.statusScreenTitle,\n                  status: _vm.statusScreenStatus,\n                  message: _vm.statusScreenMessage,\n                  mainAction: _vm.statusScreenAction,\n                  lightBlue: !_vm.useDarkSyncStatusScreen\n                },\n                on: { \"main-action\": _vm._statusScreenActionHandler }\n              })\n            : _vm._e()\n        ],\n        1\n      ),\n      _c(\"GlobalClose\")\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.small-page[data-v-6c741793] {\\n    position: relative;\\n}\\n.nq-h1[data-v-6c741793] {\\n    margin-top: 3.5rem;\\n    margin-bottom: 1rem;\\n    line-height: 1;\\n    text-align: center;\\n}\\n.request-info[data-v-6c741793] {\\n    text-align: center;\\n    margin-left: 2rem;\\n    margin-right: 2rem;\\n    -ms-flex-negative: 0;\\n        flex-shrink: 0;\\n}\\n.status-screen[data-v-6c741793] {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseAddress.vue?vue&type=style&index=0&id=6c741793&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b724a294\", content, false, {\"sourceMap\":false,\"shadowMode\":false});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseAddress.vue?vue&type=style&index=0&id=6c741793&scoped=true&lang=css&\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseAddress.vue?vue&type=style&index=0&id=6c741793&scoped=true&lang=css&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import { render, staticRenderFns } from \"./ChooseAddress.vue?vue&type=template&id=6c741793&scoped=true&\"\nimport script from \"./ChooseAddress.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChooseAddress.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChooseAddress.vue?vue&type=style&index=0&id=6c741793&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c741793\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/iesiyok/projects/acc-js/development/nimiq2/hub/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6c741793')) {\n      api.createRecord('6c741793', component.options)\n    } else {\n      api.reload('6c741793', component.options)\n    }\n    module.hot.accept(\"./ChooseAddress.vue?vue&type=template&id=6c741793&scoped=true&\", function () {\n      api.rerender('6c741793', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/ChooseAddress.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/ts-loader/index.js??ref--12-1!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseAddress.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/ts-loader/index.js??ref--12-1!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseAddress.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseAddress.vue?vue&type=style&index=0&id=6c741793&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseAddress.vue?vue&type=style&index=0&id=6c741793&scoped=true&lang=css&\"","export * from \"-!../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"3e5283d1-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseAddress.vue?vue&type=template&id=6c741793&scoped=true&\""],"sourceRoot":""}