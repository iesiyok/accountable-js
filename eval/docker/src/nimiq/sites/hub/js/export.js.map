{"version":3,"sources":["sources://./src/views/Export.vue","sources://./src/views/ExportSuccess.vue","webpack-generated:///./src/views/Export.vue?07c4","webpack-generated:///./src/views/ExportSuccess.vue?12a2","webpack-generated:///./src/views/Export.vue?e777","webpack:///./src/views/Export.vue?b0b7","webpack-generated:///./src/views/Export.vue?49b1","webpack-generated:///./src/views/ExportSuccess.vue?8ec9","webpack:///./src/views/ExportSuccess.vue?0b7e","webpack-generated:///./src/views/ExportSuccess.vue?8e94"],"names":[],"mappings":"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","file":"js/export.js","sourcesContent":["\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport { ParsedExportRequest } from '../lib/RequestTypes';\nimport KeyguardClient from '@nimiq/keyguard-client';\nimport { WalletStore } from '@/lib/WalletStore';\nimport { Static } from '../lib/StaticStore';\n\n@Component\nexport default class Export extends Vue {\n    @Static private request!: ParsedExportRequest;\n\n    public async created() {\n        const wallet = (await WalletStore.Instance.get(this.request.walletId))!;\n\n        const request: KeyguardClient.ExportRequest = {\n            appName: this.request.appName,\n            keyId: wallet.keyId,\n            keyLabel: wallet.labelForKeyguard,\n            fileOnly: this.request.fileOnly,\n            wordsOnly: this.request.wordsOnly,\n        };\n\n        const client = this.$rpc.createKeyguardClient(true);\n        client.export(request);\n    }\n}\n","\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport { SmallPage, CheckmarkIcon } from '@nimiq/vue-components';\nimport { ParsedSimpleRequest } from '../lib/RequestTypes';\nimport { ExportResult, RequestType } from '../lib/PublicRequestTypes';\nimport { State } from 'vuex-class';\nimport staticStore, { Static } from '../lib/StaticStore';\nimport StatusScreen from '../components/StatusScreen.vue';\nimport { WalletStore } from '../lib/WalletStore';\nimport KeyguardClient from '@nimiq/keyguard-client';\n\n@Component({components: {SmallPage, StatusScreen, CheckmarkIcon}})\nexport default class ExportSuccess extends Vue {\n    @Static private request!: ParsedSimpleRequest;\n    @State private keyguardResult!: KeyguardClient.ExportResult;\n\n    private statusScreenState = StatusScreen.State.LOADING;\n    private successMessage = '';\n\n    private async mounted() {\n        let result: ExportResult;\n\n        // When doing pre-migration exports, or the request is MIGRATE, no wallet will be found.\n        const wallet = this.request.walletId ? await WalletStore.Instance.get(this.request.walletId) : null;\n\n        if (wallet) {\n            wallet.fileExported = wallet.fileExported || this.keyguardResult.fileExported;\n            wallet.wordsExported = wallet.wordsExported || this.keyguardResult.wordsExported;\n\n            result = {\n                fileExported: wallet.fileExported,\n                wordsExported: wallet.wordsExported,\n            };\n        } else {\n            result = {\n                fileExported: this.keyguardResult.fileExported,\n                wordsExported: this.keyguardResult.wordsExported,\n            };\n        }\n\n        if (!this.keyguardResult.fileExported && !this.keyguardResult.wordsExported) {\n            this.$rpc.resolve(result);\n            return;\n        }\n\n        if (wallet) {\n            await WalletStore.Instance.put(wallet);\n        }\n\n        if (this.keyguardResult.fileExported) {\n            if (this.keyguardResult.wordsExported) {\n                this.successMessage = this.$t('Account backed up!') as string;\n            } else {\n                this.successMessage = this.$t('Login File saved!') as string;\n            }\n        } else if (this.keyguardResult.wordsExported) {\n            this.successMessage = this.$t('Recovery Words exported!') as string;\n        }\n        this.statusScreenState = StatusScreen.State.SUCCESS;\n\n        if (wallet) {\n            setTimeout(() => this.$rpc.resolve(result), StatusScreen.SUCCESS_REDIRECT_DELAY);\n        } else {\n            // This was a pre-migration legacy account export\n\n            // We need to hijack the routing here, so that we do not go through RpcApi's reply method.\n            // Going through that method would redirect the user to the originalRouteName, but it would\n            // not go through the registered AccountsApis, thus not checking the need to migrate,\n            // and thus not setting the originalRouteName again, thus losing the type of the original request.\n            // We want the RpcApi's reply method to only be invoked when migration is finished.\n\n            // Recreate original URL with original query parameters\n            const query = { rpcId: staticStore.rpcState!.id.toString() };\n            setTimeout(() => this.$router.push({\n                name: RequestType.MIGRATE,\n                query,\n            }), StatusScreen.SUCCESS_REDIRECT_DELAY);\n        }\n    }\n}\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\")\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"container pad-bottom\" },\n    [\n      _c(\n        \"SmallPage\",\n        [\n          _c(\"StatusScreen\", {\n            attrs: { title: _vm.successMessage, state: _vm.statusScreenState }\n          })\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Export.vue?vue&type=template&id=29c22c6e&\"\nimport script from \"./Export.vue?vue&type=script&lang=ts&\"\nexport * from \"./Export.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/iesiyok/projects/acc-js/development/nimiq2/hub/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('29c22c6e')) {\n      api.createRecord('29c22c6e', component.options)\n    } else {\n      api.reload('29c22c6e', component.options)\n    }\n    module.hot.accept(\"./Export.vue?vue&type=template&id=29c22c6e&\", function () {\n      api.rerender('29c22c6e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/Export.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/ts-loader/index.js??ref--12-1!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Export.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/ts-loader/index.js??ref--12-1!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Export.vue?vue&type=script&lang=ts&\"","export * from \"-!../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"3e5283d1-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Export.vue?vue&type=template&id=29c22c6e&\"","import { render, staticRenderFns } from \"./ExportSuccess.vue?vue&type=template&id=0c25ca65&\"\nimport script from \"./ExportSuccess.vue?vue&type=script&lang=ts&\"\nexport * from \"./ExportSuccess.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/iesiyok/projects/acc-js/development/nimiq2/hub/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0c25ca65')) {\n      api.createRecord('0c25ca65', component.options)\n    } else {\n      api.reload('0c25ca65', component.options)\n    }\n    module.hot.accept(\"./ExportSuccess.vue?vue&type=template&id=0c25ca65&\", function () {\n      api.rerender('0c25ca65', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/ExportSuccess.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/ts-loader/index.js??ref--12-1!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportSuccess.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/ts-loader/index.js??ref--12-1!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportSuccess.vue?vue&type=script&lang=ts&\"","export * from \"-!../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"3e5283d1-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportSuccess.vue?vue&type=template&id=0c25ca65&\""],"sourceRoot":""}