{"version":3,"sources":["sources://./src/components/GlobalClose.vue","webpack-generated:///./src/components/GlobalClose.vue?d136","webpack-generated:///./src/components/GlobalClose.vue?ba4e","webpack-generated:///./src/components/GlobalClose.vue?2f4d","webpack-generated:///./src/components/GlobalClose.vue?5fcb","webpack:///./src/components/GlobalClose.vue?e3f1","webpack-generated:///./src/components/GlobalClose.vue?5058","webpack-generated:///./src/components/GlobalClose.vue?10ab","sources://./src/lib/CheckoutServerApi.ts"],"names":[],"mappings":"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","file":"js/checkout~sign-transaction-ledger-legacy.js","sourcesContent":["\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { ArrowLeftSmallIcon } from '@nimiq/vue-components';\nimport { ERROR_CANCELED } from '../lib/Constants';\nimport { Static } from '../lib/StaticStore';\nimport { ParsedBasicRequest } from '../lib/RequestTypes';\n\n@Component({ components: { ArrowLeftSmallIcon }})\nexport default class GlobalClose extends Vue {\n    @Prop(String) public buttonLabel?: string;\n\n    @Prop(Function) public onClose?: () => void;\n\n    @Prop(Boolean) public hidden?: boolean;\n\n    @Static private request!: ParsedBasicRequest;\n\n    private get effectiveButtonLabel() {\n        if (this.buttonLabel) return this.buttonLabel;\n        // Special handling for some specific known app names to be able to adapt translations depending on the app,\n        // for example to adapt to an app's gender in a language (e.g. German: \"Zurück zur Wallet\", \"Zurück zum Miner\").\n        // Note that the app names that should not be translated are specified as a slot.\n        const appName = this.request.appName;\n        switch (appName) {\n            case 'Accounts': return this.$t('Back to my accounts'); // Nimiq Safe\n            case 'Wallet': return this.$t('Back to {Wallet}', { Wallet: appName });\n            case 'Nimiq Miner': return this.$t('Back to {Nimiq Miner}', { 'Nimiq Miner': appName });\n            case 'Nimiq Faucet': return this.$t('Back to {Nimiq Faucet}', { 'Nimiq Faucet': appName });\n            case 'Donation Button Creator': return this.$t('Back to Donation Button Creator');\n            case 'Nimiq Gift Card': return this.$t('Back to Nimiq Gift Card');\n            case 'Nimiq Vote': return this.$t('Back to Nimiq Vote');\n            case 'CryptoPayment.link': return this.$t('Back to CryptoPayment.link');\n            default: return this.$t('Back to {appName}', { appName });\n        }\n    }\n\n    private get effectiveCloseHandler() {\n        return !this.hidden\n            ? this.onClose || (() => this.$rpc.reject(new Error(ERROR_CANCELED)))\n            : () => void 0;\n    }\n}\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"button\",\n    {\n      staticClass: \"global-close nq-button-s\",\n      class: { hidden: _vm.hidden },\n      on: { click: _vm.effectiveCloseHandler }\n    },\n    [\n      _c(\"ArrowLeftSmallIcon\"),\n      _vm._v(\" \" + _vm._s(_vm.effectiveButtonLabel) + \" \")\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n.global-close[data-v-d78638d6] {\\n    margin-top: 8rem;\\n    margin-bottom: 3rem;\\n    background: transparent !important;\\n    opacity: 0.4;\\n    font-size: 2rem;\\n    -webkit-transition: color .3s var(--nimiq-ease), opacity .3s var(--nimiq-ease), visibility .3s;\\n    transition: color .3s var(--nimiq-ease), opacity .3s var(--nimiq-ease), visibility .3s;\\n}\\n.global-close[data-v-d78638d6]:hover,\\n.global-close[data-v-d78638d6]:focus {\\n    color: var(--nimiq-light-blue);\\n    opacity: 1;\\n}\\n.global-close.hidden[data-v-d78638d6] {\\n    visibility: hidden;\\n    pointer-events: none;\\n    opacity: 0;\\n}\\n.nq-icon[data-v-d78638d6] {\\n    vertical-align: top;\\n    width: 1.375rem;\\n    height: 1.125rem;\\n    margin-right: 0.25rem;\\n    margin-top: 1.125rem;\\n    -webkit-transition: -webkit-transform .3s var(--nimiq-ease);\\n    transition: -webkit-transform .3s var(--nimiq-ease);\\n    transition: transform .3s var(--nimiq-ease);\\n    transition: transform .3s var(--nimiq-ease), -webkit-transform .3s var(--nimiq-ease);\\n}\\n.global-close:hover .nq-icon[data-v-d78638d6],\\n.global-close:focus .nq-icon[data-v-d78638d6] {\\n    -webkit-transform: translate3D(-0.25rem, 0, 0);\\n            transform: translate3D(-0.25rem, 0, 0);\\n}\\n@media (max-width: 450px) {\\n.global-close[data-v-d78638d6] {\\n        position: absolute;\\n        right: 1rem;\\n        top: 2.4rem;\\n        margin: 0;\\n}\\n.global-close[data-v-d78638d6]::before {\\n        /* avoid that the button overflows the page, causing vertical scrolling on mobile */\\n        right: -1rem;\\n}\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalClose.vue?vue&type=style&index=0&id=d78638d6&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"71f0508c\", content, false, {\"sourceMap\":false,\"shadowMode\":false});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalClose.vue?vue&type=style&index=0&id=d78638d6&scoped=true&lang=css&\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalClose.vue?vue&type=style&index=0&id=d78638d6&scoped=true&lang=css&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import { render, staticRenderFns } from \"./GlobalClose.vue?vue&type=template&id=d78638d6&scoped=true&\"\nimport script from \"./GlobalClose.vue?vue&type=script&lang=ts&\"\nexport * from \"./GlobalClose.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./GlobalClose.vue?vue&type=style&index=0&id=d78638d6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d78638d6\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/iesiyok/projects/acc-js/development/nimiq2/hub/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('d78638d6')) {\n      api.createRecord('d78638d6', component.options)\n    } else {\n      api.reload('d78638d6', component.options)\n    }\n    module.hot.accept(\"./GlobalClose.vue?vue&type=template&id=d78638d6&scoped=true&\", function () {\n      api.rerender('d78638d6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/GlobalClose.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/ts-loader/index.js??ref--12-1!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalClose.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/ts-loader/index.js??ref--12-1!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalClose.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalClose.vue?vue&type=style&index=0&id=d78638d6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalClose.vue?vue&type=style&index=0&id=d78638d6&scoped=true&lang=css&\"","export * from \"-!../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"3e5283d1-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalClose.vue?vue&type=template&id=d78638d6&scoped=true&\"","import { Currency, PaymentType, PaymentOptionsForCurrencyAndType, PaymentState } from './PublicRequestTypes';\nimport { isMilliseconds } from './Helpers';\n\nexport interface GetStateResponse {\n    time: number;\n    payment_accepted: boolean;\n    payment_state: PaymentState;\n}\n\nexport default class CheckoutServerApi {\n    public static async fetchTime(endPoint: string, csrfToken: string): Promise<number> {\n        const value = await CheckoutServerApi.getState(endPoint, csrfToken);\n        return value.time;\n    }\n\n    public static async fetchPaymentOption<C extends Currency, T extends PaymentType>(\n        endPoint: string,\n        currency: C,\n        type: T,\n        csrfToken: string,\n    ): Promise<PaymentOptionsForCurrencyAndType<C, T>> {\n        let fetchedData: any;\n\n        if (history.state[currency]) {\n            // Retrieve the data from state if already fetched\n            fetchedData = history.state[currency];\n        } else {\n            const requestData = new URLSearchParams();\n            requestData.append('currency', currency);\n            requestData.append('command', 'set_currency');\n            fetchedData = await CheckoutServerApi._fetchData(endPoint, requestData, csrfToken);\n\n            // Store in state in case this fetch gets repeated (also after reload and history.back)\n            history.replaceState({\n                ...history.state,\n                [currency]: fetchedData,\n            }, '');\n        }\n\n        if (currency !== fetchedData.currency || type !== fetchedData.type) {\n            throw new Error('Unexpected: fetch did not return the correct currency/type combination');\n        }\n\n        return fetchedData;\n    }\n\n    public static async getState(\n        endPoint: string,\n        csrfToken: string,\n    ): Promise<GetStateResponse> {\n        if (CheckoutServerApi._getStatePromise) return CheckoutServerApi._getStatePromise;\n\n        const data = new URLSearchParams();\n        data.append('command', 'get_state');\n\n        CheckoutServerApi._getStatePromise = CheckoutServerApi._fetchData(endPoint, data, csrfToken).then(\n            (value) => {\n                // Clear cached request after 3 seconds\n                window.setTimeout(() => CheckoutServerApi._getStatePromise = null, 3000);\n\n                value.time = isMilliseconds(value.time) ? value.time : value.time * 1000;\n                return value;\n            },\n            (e) => {\n                CheckoutServerApi._getStatePromise = null;\n                return Promise.reject(e);\n            },\n        );\n\n        return CheckoutServerApi._getStatePromise;\n    }\n\n    private static _getStatePromise: Promise<GetStateResponse> | null = null;\n\n    private static async _fetchData(endPoint: string, requestData: URLSearchParams, csrfToken: string): Promise<any> {\n        requestData.append('csrf', csrfToken);\n        const headers = new Headers();\n        const init: RequestInit = {\n            method: 'POST',\n            headers,\n            body: requestData,\n            mode: 'cors',\n            cache: 'default',\n            credentials: 'include',\n        };\n\n        let fetchResponse;\n        try {\n            // First we try to send the request with 'credentials: include', which includes cookies\n            // and auth headers in cross-origin requests, but in turn requires the server to set\n            // the 'Access-Control-Allow-Credentials: true' header.\n            const fetchRequest = new Request(endPoint, init);\n            fetchResponse = await fetch(fetchRequest);\n        } catch (err) {\n            // If the previous request with included credentials fails, we try again with the\n            // credentials omitted (default for cross-origin requests). Some implementations might\n            // not have the header set, because they don't require cookies or auth headers for\n            // authenticating the webhook.\n            delete init.credentials;\n            const fetchRequest = new Request(endPoint, init);\n            fetchResponse = await fetch(fetchRequest);\n        }\n\n        if (!fetchResponse.ok) {\n            if (process.env.NODE_ENV === 'development'\n                || document.referrer === 'https://hub.nimiq-testnet.com/demos.html') {\n                // Use fake data in local development or deployed testnet hub demo page if we have no checkout server\n                console.warn('Using dummy data instead of actual checkout server.');\n                return this._generateDummyData(requestData);\n            }\n            let errorMsg = '';\n            try {\n                errorMsg = (await fetchResponse.json()).error;\n            } catch (error) {\n                // Ignore\n            }\n            throw new Error(`Callback Error: ${fetchResponse.status} - ${errorMsg || fetchResponse.statusText}`);\n        }\n\n        const fetchedData = await fetchResponse.json();\n        if (fetchedData.error) {\n            throw new Error(fetchedData.error);\n        }\n\n        return fetchedData;\n    }\n\n    private static _generateDummyData(requestData: URLSearchParams) {\n        if (requestData.get('command') === 'get_state') {\n            return {\n                time: Date.now(),\n\n                // Change these to true and PAID for simulating a successfull payment\n                payment_accepted: false,\n                payment_state: PaymentState.NOT_FOUND,\n            };\n        } else if (requestData.get('command') === 'set_currency') {\n            const now = Date.now();\n            const options = [\n                {\n                    currency: Currency.BTC,\n                    type: PaymentType.DIRECT,\n                    amount: '.0002e8',\n                    vendorMarkup: -.05,\n                    expires: now + 15 * 60000, // 15 minutes\n                    protocolSpecific: {\n                        feePerByte: 2, // 2 sat per byte\n                        recipient: '17w6ar5SqXFGr786WjGHB8xyu48eujHaBe', // Unicef\n                    },\n                },\n                {\n                    currency: Currency.NIM,\n                    type: PaymentType.DIRECT,\n                    amount: '1e5',\n                    expires: now + 15 * 60000, // 15 minutes\n                    protocolSpecific: {\n                        fee: 50000,\n                        recipient: 'NQ09 VF5Y 1PKV MRM4 5LE1 55KV P6R2 GXYJ XYQF', // Nimiq foundation\n                    },\n                },\n                {\n                    currency: Currency.ETH,\n                    type: PaymentType.DIRECT,\n                    amount: '.0023e18',\n                    vendorMarkup: .03,\n                    expires: now + 15 * 60000, // 15 minutes\n                    protocolSpecific: {\n                        gasLimit: 21000,\n                        gasPrice: '3e9',\n                        recipient: '0xa4725d6477644286b354288b51122a808389be83', // the water project\n                    },\n                },\n            ];\n            const requestedOption = options.find((option) => option.currency === requestData.get('currency'));\n            return {\n                time: now,\n                ...requestedOption,\n            };\n        }\n    }\n}\n"],"sourceRoot":""}